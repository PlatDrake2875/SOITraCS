# Algorithm Configuration for SOITraCS
# All algorithm parameters are tunable here without code changes
# Note: Overlays are disabled by default for cleaner visuals

cellular_automata:
  enabled: true
  max_velocity: 5          # Maximum vehicle speed (cells/tick)
  slow_probability: 0.3    # Random slowdown probability (NaSch model)
  lane_change_threshold: 2 # Minimum speed diff for lane change

sotl:
  enabled: false           # Disabled by default for cleaner visuals
  min_green_time: 10       # Minimum green phase duration (ticks)
  max_green_time: 60       # Maximum green phase duration (ticks)
  theta: 5                 # Queue threshold for phase change
  mu: 3                    # Platoon detection threshold
  omega: 15                # Gap-out timer threshold

aco:
  enabled: false           # Disabled by default for cleaner visuals
  alpha: 2.0               # Pheromone importance weight (increased to make pheromone matter more)
  beta: 1.5                # Heuristic importance weight (reduced distance dominance)
  rho: 0.02                # Evaporation rate per tick (slower: 2% vs 10% allows accumulation)
  Q: 100                   # Pheromone deposit constant
  reroute_frequency: 10    # Ticks between reroute calculations

pso:
  enabled: false           # Disabled by default (computationally heavy)
  swarm_size: 30           # Number of particles in swarm
  c1: 2.0                  # Cognitive coefficient (personal best)
  c2: 2.0                  # Social coefficient (global best)
  w: 0.7                   # Inertia weight
  optimization_interval: 50 # Ticks between optimization runs

som:
  enabled: false           # Disabled by default
  grid_size: [10, 10]      # SOM grid dimensions
  learning_rate: 0.5       # Initial learning rate
  sigma: 3.0               # Initial neighborhood radius
  pretrained_path: "data/pretrained_models/som_traffic_patterns.npz"

marl:
  enabled: false           # Disabled by default
  learning_rate: 0.01      # Q-learning rate (higher for faster learning)
  gamma: 0.95              # Discount factor for future rewards
  epsilon: 0.1             # Exploration rate (used in training mode)
  epsilon_min: 0.01        # Minimum exploration rate
  epsilon_decay: 0.9995    # Epsilon decay per step
  pretrained_path: "data/pretrained_models/marl_q_tables.npz"
  inference_only: true     # Visualization-only mode (no signal control)
  # State discretization
  queue_bins: 5            # Number of bins for queue discretization
  time_bins: 4             # Number of bins for time-in-phase
  pressure_bins: 3         # Number of bins for neighbor pressure
